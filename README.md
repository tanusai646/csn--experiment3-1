# ming.w用の報告書兼指示書

## 並列化処理の前に行う動作の説明

### SSH接続を行う

vscodeでSSｈ接続処理を代替してもらっているので無視

### 作成したファイルのコンパイル

makeファイルでできるので基本的に考えなくて良い
```sh
make
```

### 並列化したものの実行

実行自体は並列サーバーで実施する．
そのために，並列サーバーで実施するためのコマンド等が必要．

'.sh'ファイルを使用しないといけない．

## 報告書

### 20240709-1実施内容

すべてのfor文に対して並列化処理を実施．
試行回数が300前後から3000近くまで実行できた．

### 20240709-2実施内容

学習率の変更をしてみる．
0.05→0.01
0.1→0.2
0.2→0.5
0.4→0.6
に変更．結果が悪くなったので戻す．

### 20240709-3実施内容

よりよい値を出力できるよう改良案を考える．
重力ポテンシャル(評価1)に対して小さい値を出すことができないかを考える．

### 20240721-4実施内容

#### 高速化の処理#1
出力をしないようにした．


変更前
```c

```


変更後
```c
if(fabs(det) < 1e-20){
    det = (det < 0 ? -1 : 1) * 1e-20;
}
```
結果：変化なし

#### 高速化の処理#2
初期評価値が変化しない場合に早期に終了させるようにした．

変更前
```c

```
結果
[ファイル](/ensyuu4/ming/run-ming-mp.sh.e21239)
結果は変化なかったが，neibがたくさん出力されるようになった．

#### 高速化の処理#3
学習率を動的に変化できるようにした．

結果: 結果自体変わらず．ただ，neibがいっぱい出力されるようになった．

#### 高速化の処理4
get_valsとimproveの中身を変更した．
うまく並列化できていないみたいだったみたいなので，並列化処理にローカル変数を付け加えた．

結果
[ファイル](/ensyuu4/ming/run-ming-mp.sh.e21241)
結果として変化はなかったが，少し試行回数が増えたのかな？

#### 高速化の処理#5
improveの中を変更した．

結果
[ファイル](/ensyuu4/ming/run-ming-mp.sh.e21243)
試行回数は増えた．結果としての変化はなかった．
2つめのキーに関しては結果が悪くなった気がする．

#### 高速化の処理#6
1. 反復改良(ニュートン法)の適用
2. 見込みがあるか判断する仕組み
に関して処理を行った．

結果
[ファイル](/ensyuu4/ming/run-ming-mp.sh.e21245)
[ファイル](/ensyuu4/ming/run-ming-mp2.sh.e21246)
結果としては変わらなかったけど，試行回数が増えた．

#### 高速化の処理#7
高速化の処理#6に対しての多少の変更．
更新ステップのサイズを適切に調整するために，最大ステップサイズを設定．

結果

[ファイル](/ensyuu4/ming/run-ming-mp.sh.e21247)
[ファイル](/ensyuu4/ming/run-ming-mp2.sh.e21248)
mp2に関して評価値が少しだけ下がった．試行回数も大幅に増えた．